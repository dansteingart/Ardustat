// Generated by CoffeeScript 1.6.2
var defaultType;

defaultType = 'redis';

module.exports = function(options) {
  var Db, type, _ref;

  if (options == null) {
    options = {};
  }
  type = (_ref = options.type) != null ? _ref : defaultType;
  if (type === 'memory') {
    console.warn("Database type: 'memory' detected. This has been deprecated and will be removed in a future version. Use 'none' instead, or just remove the db:{} block from your options.");
  }
  if (type === 'none' || type === 'memory') {
    return null;
  } else {
    Db = (function() {
      switch (type) {
        case 'redis':
          return require('./redis');
        case 'couchdb':
          return require('./couchdb');
        case 'pg':
          return require('./pg');
        case 'mysql':
          return require('./mysql');
        case 'amazon':
          return require('./amazon');
        case 'mongo':
          return require('./mongo');
        default:
          throw new Error("Invalid or unsupported database type: '" + type + "'");
      }
    })();
    return new Db(options);
  }
};
